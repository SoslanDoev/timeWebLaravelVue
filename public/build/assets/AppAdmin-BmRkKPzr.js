import{_ as F,a,c as n,p as K,b as d,F as c,d as _,t as r,w as k,y as Q,z as W,r as x,q as X,A as Y,k as p,m as g,l as y,h as R,i as w,x as Z,j as U,B as E,C as T,e as q}from"./app-BxmQDjrR.js";import{_ as D}from"./AppLabel-DGWVFSkF.js";import{A as ee,a as te}from"./AppArrowRight-Dg7FoaJb.js";import{_ as ae}from"./AppActive-czQzqbyx.js";const ne={},ie={class:"text__block hover"};function le(m,h){return a(),n("div",ie,[K(m.$slots,"default")])}const se=F(ne,[["render",le]]),de=m=>(Q("data-v-e6433ae5"),m=m(),W(),m),oe={key:0},re=de(()=>d("h2",{class:"title"},"Таблица пуста",-1)),ue=[re],ce={key:1,class:"app-table"},_e={class:"app-table__thead"},me=["onClick"],pe=["onClick"],ve={__name:"AppTable",props:{thList:{type:Array,required:!0},tdList:{type:Array,required:!0}},emits:["update","destroy"],setup(m,{emit:h}){const o=h;return(f,C)=>!m.tdList.length||!m.thList.length?(a(),n("div",oe,ue)):(a(),n("table",ce,[d("thead",_e,[d("tr",null,[(a(!0),n(c,null,_(m.thList,(u,s)=>(a(),n("th",{key:s},r(u),1))),128))])]),d("tbody",null,[(a(!0),n(c,null,_(m.tdList,(u,s)=>(a(),n("tr",{key:s},[(a(!0),n(c,null,_(m.thList,(A,L)=>(a(),n("td",{class:"hover",key:L},r(u[A]||"Пусто"),1))),128)),d("td",{class:"app-table__btn",onClick:k(A=>o("update",u),["prevent"])},"Обновить",8,me),d("td",{class:"app-table__btn",onClick:k(A=>o("destroy",u),["prevent"])},"Удалить",8,pe)]))),128))])]))}},he=F(ve,[["__scopeId","data-v-e6433ae5"]]),fe={class:"admin"},ye={class:"container"},ke={class:"admin__inner"},be=d("h2",{class:"title admin__title"},"Админ панель",-1),ge={class:"admin__content"},xe={key:0,class:"admin__view-delete"},we=d("h3",{class:"title"},"Вы уверены что хотите удалить?",-1),$e={class:"admin__view-btn"},De={class:"admin__info"},Ce={class:"admin__info-list"},Ve=["onClick"],Ue={class:"admin__content-crud"},Ae={key:0,class:"admin__form-arrow"},qe={class:"admin__form-arrow---info"},Se={class:"title admin__content-title"},Te={class:"admin__content-inner"},Le={key:0},Ie={key:1,class:"admin__content-get admin__box"},Be=d("h4",null,"Загрузка...",-1),Ne=[Be],Re={key:1,class:"admin__content-form admin__box"},Ee=d("h4",{class:"title admin__content-title"},"Добавление",-1),Fe=["onUpdate:modelValue"],Me=["value"],Oe=["value"],je={key:0},ze={key:0,class:"admin__content-form__form"},Pe=["type","checked","id","name","value","onUpdate:modelValue"],Ge=["type","placeholder","id","onUpdate:modelValue"],He={key:2},Je={key:2,class:"admin__content-form admin__box"},Ke=d("h4",{class:"title admin__content-title"},"Обновление",-1),Qe=["onUpdate:modelValue"],We=["value"],Xe=["value"],Ye={key:0},Ze={key:1,class:"admin__content-form__form"},et=["type","id","name","value","onUpdate:modelValue"],tt=["type","placeholder","id","onUpdate:modelValue"],at={key:0},nt={key:1,class:"admin__content-null"},it=d("h4",{class:"title"},"Ничего не выбрано",-1),lt=[it],ut={__name:"AppAdmin",setup(m){const h=x([]),o=x({}),f=x([]),C=x(!1),u=x(0),s=x({activeTitle:null,active:null,data:{},id:null,url:null}),A=i=>{u.value=2,s.value.data={};for(let l in i)s.value.data[l]=i[l]},L=X(()=>{const i=[];let l=f.value[0];if(l)for(let e in l)i.push(e);return i}),M=(i,l,e)=>{s.value.active=i.title,s.value.id=l,s.value.url=e,typeof i.func=="function"&&i.func(i),C.value=!1,u.value=0},I=i=>{i==="+"?u.value+=1:i==="-"&&(u.value-=1),u.value>=2?u.value=2:u.value<=0&&(u.value=0)},O=async()=>{var i,l,e;try{o.value={};const t={};if(Object.entries(s.value.data).forEach(S=>{t[S[0]]=S[1]}),console.log(t),t.start_time||t.end_time){let S=new Date(t.start_time),J=new Date(t.end_time);t.start_time=S.toISOString().slice(0,19).replace("T"," "),t.end_time=J.toISOString().slice(0,19).replace("T"," ")}const v=await q.post(s.value.url,t);console.log("dadadadad",v);const N=((l=(i=v.data)==null?void 0:i.data)==null?void 0:l.data)||((e=v.data)==null?void 0:e.data)||v.data;N&&f.value.push(N),h.value.push("Request was successful!")}catch(t){console.log(t),o.value=t.response.data.errors,h.value.push("Request failed.")}},j=(i,l)=>i.findIndex(e=>e.id===l),z=async()=>{try{o.value={};const i={};Object.entries(s.value.data).forEach(e=>{(e[1]||e[1]===0)&&(i[e[0]]=e[1])}),await q.patch(s.value.url+`/${i.id}`,i);let l=j(f.value,i.id);f.value[l]=i,console.log(f.value),h.value.push("Request was successful!")}catch(i){console.log(i),o.value=i.response.data.errors,h.value.push("Request failed.")}},$=x({visible:!1,item:null}),P=i=>{$.value.visible=!0,$.value.item=i},B=i=>{if(i===!1){$.value.visible=!1;return}G()},G=async()=>{const i=$.value.item;try{await q.delete(s.value.url+`/${i.id}`),f.value=f.value.filter(l=>l.id!==i.id)}catch(l){console.log(l),o.value=l.response.data.errors,h.value.push("Request failed.")}$.value.visible=!1,$.value.item=null},H=i=>{h.value.splice(i,1)},b=async i=>{try{i&&i.meta&&i.meta.forEach(async l=>{if(l.url){const e=await q.get(l.url);l.data=e.data.data}})}catch(l){console.log(l)}console.log(i);try{const l=await q.get(i.url);f.value=l.data.data,C.value=!0}catch(l){console.log(l)}};Y("start_time",()=>{console.log("da")});const V=x([{id:1,title:"users",name:"Студенты",visible:!1,url:"/api/users",inner:[{id:10,name:"Добавить"},{id:11,name:"Обновить"},{id:12,name:"Удалить"}],meta:[{id:"meta_1",name:"group_id",title:"Группы",url:"/api/groups",placeholder:"Выберите группу",data:[]}],forms:[{id:"form_1",name:"name",type:"text",placeholder:"Введите имя",id:"name"},{id:"form_2",name:"surname",type:"text",placeholder:"Введите фамилию",id:"surname"},{id:"form_3",name:"role",type:"text",placeholder:"Выберите роль",id:"role",form:[{id:"form_3-1",value:0,name:"role",type:"radio",title:"Пользователь",checked:"checked"},{id:"form_3-2",value:1,name:"role",type:"radio",title:"Админ"}]},{id:"form_4",name:"block",type:"text",placeholder:"Выберите активность пользователя",id:"block",form:[{id:"form_4-1",value:0,name:"block",type:"radio",title:"Активный",checked:"checked"},{id:"form_4-2",value:1,name:"block",type:"radio",title:"Заблокированный"}]},{id:"form_6",name:"email",type:"email",placeholder:"Введите почту",id:"email"},{id:"form_7",name:"password",type:"password",placeholder:"Введите пароль",id:"password"},{id:"form_8",name:"password_confirmation",type:"password",placeholder:"Повторите пароль",id:"password_confirmation"}],func:b},{id:2,title:"discipline",name:"Дисциплины",visible:!1,url:"/api/disciplines",inner:[{id:20,name:"Добавить"},{id:21,name:"Обновить"},{id:22,name:"Удалить"}],forms:[{id:"form_1",name:"name",type:"text",placeholder:"Введите имя",id:"name"}],func:b},{id:3,title:"authors",name:"Авторы",visible:!1,url:"/api/authors",inner:[{id:30,name:"Добавить"},{id:31,name:"Обновить"},{id:32,name:"Удалить"}],forms:[{id:"form_1",name:"name",type:"text",placeholder:"Введите имя",id:"name"},{id:"form_2",name:"surname",type:"text",placeholder:"Введите фамилию",id:"surname"},{id:"form_3",name:"patronymic",type:"text",placeholder:"Введите отчество",id:"patronymic"}],func:b},{id:4,title:"answer",name:"Ответы",url:"/api/answers",visible:!1,inner:[{id:40,name:"Добавить"},{id:41,name:"Обновить"},{id:42,name:"Удалить"}],meta:[{id:"meta_1",name:"question_id",title:"Вопросы",url:"/api/questions",placeholder:"Выберите вопрос",data:[]}],forms:[{id:"form_2",name:"text",type:"text",placeholder:"Введите текст",id:"text"},{id:"form_3",name:"points",type:"number",placeholder:"Кол-во баллов",id:"points"}],func:b},{id:9,title:"student_answer",name:"Ответы студентов",url:"/api/useranswer",visible:!1,inner:[{id:90,name:"Добавить"},{id:91,name:"Обновить"},{id:92,name:"Удалить"}],meta:[],func:b},{id:5,title:"test_schedules",name:"Настройка тестов",url:"/api/testschedules",visible:!1,inner:[{id:50,name:"Добавить"},{id:51,name:"Обновить"},{id:52,name:"Удалить"}],meta:[{id:"meta_1",type:"number",name:"test_id",title:"Тесты",url:"/api/tests",placeholder:"Выберите тест",data:[]},{id:"meta_2",type:"number",name:"group_id",title:"Группы",url:"/api/groups",placeholder:"Выберите группу",data:[]}],forms:[{id:"form_1",name:"start_time",type:"datetime-local",placeholder:"Начало тестирования",id:"start_time"},{id:"form_2",name:"end_time",type:"datetime-local",placeholder:"Конец тестирования",id:"end_time"}],func:b},{id:6,title:"tests",name:"Тесты",visible:!1,url:"/api/tests",inner:[{id:60,name:"Добавить"},{id:61,name:"Обновить"},{id:62,name:"Удалить"}],meta:[{id:"meta_1",name:"discipline_id",title:"Дисциплины",url:"/api/disciplines",placeholder:"Выберите дисциплину",data:[]},{id:"meta_2",name:"author_id",title:"Авторы",url:"/api/authors",placeholder:"Выберите автора",data:[]}],forms:[{id:"form_1",name:"title",type:"text",placeholder:"Введите название",id:"title"},{id:"form_2",name:"description",type:"text",placeholder:"Введите описание",id:"description"},{id:"form_3",name:"duration",type:"number",placeholder:"Введите время теста",id:"duration"}],func:b},{id:7,title:"questions",name:"Вопросы",url:"/api/questions",visible:!1,inner:[{id:70,name:"Добавить"},{id:71,name:"Обновить"},{id:72,name:"Удалить"}],meta:[{id:"meta_1",name:"test_id",title:"Тесты",url:"/api/tests",placeholder:"Выберите тест",data:[]}],forms:[{id:"form_2",name:"text",type:"text",placeholder:"Введите название",id:"text"}],func:b},{id:8,title:"groups",name:"Группы",visible:!1,url:"/api/groups",inner:[{id:80,name:"Добавить"},{id:81,name:"Обновить"},{id:82,name:"Удалить"}],forms:[{id:"form_1",name:"name",type:"text",placeholder:"Введите имя",id:"name"}],func:b}]);return(i,l)=>(a(),n("div",fe,[d("div",ye,[d("div",ke,[be,d("div",ge,[$.value.visible===!0?(a(),n("div",xe,[we,d("div",$e,[d("a",{href:"#",onClick:l[0]||(l[0]=k(e=>B(!0),["prevent"]))},"Да"),d("a",{href:"#",onClick:l[1]||(l[1]=k(e=>B(!1),["prevent"]))},"Нет")])])):p("",!0),(a(!0),n(c,null,_(h.value,(e,t)=>(a(),R(ae,{key:t,message:e,onDismissed:v=>H(t)},null,8,["message","onDismissed"]))),128)),d("div",De,[g(r(s.value)+" ",1),d("ul",Ce,[(a(!0),n(c,null,_(V.value,(e,t)=>(a(),n("li",{class:"admin__info-item",key:e.id,onClick:k(v=>s.value.activeTitle=e.name,["prevent"])},[y(se,{class:Z({"admin__info-item--active":e.title===s.value.active}),onClick:k(v=>M(e,t,e.url),["prevent"])},{default:w(()=>[g(r(e.name),1)]),_:2},1032,["class","onClick"])],8,Ve))),128))])]),d("div",Ue,[C.value===!0?(a(),n("div",Ae,[d("a",{href:"#",onClick:l[2]||(l[2]=k(e=>I("-"),["prevent"]))},[y(ee)]),d("div",qe,[d("h3",Se,r(s.value.activeTitle),1),d("p",null,r(u.value),1)]),d("a",{href:"#",onClick:l[3]||(l[3]=k(e=>I("+"),["prevent"]))},[y(te)])])):p("",!0),d("div",Te,[u.value==0?(a(),n(c,{key:0},[C.value===!0?(a(),n("div",Le,[y(he,{"td-list":f.value,"th-list":L.value,onUpdate:A,onDestroy:P},null,8,["td-list","th-list"])])):(a(),n("div",Ie,Ne))],64)):p("",!0),s.value.active&&u.value==1?(a(),n("div",Re,[Ee,(a(!0),n(c,null,_(V.value[s.value.id].meta,e=>(a(),n("div",{key:e.id,class:"admin__content-form__item"},[y(D,{to:e.id},{default:w(()=>[g(r(e.placeholder),1)]),_:2},1032,["to"]),U(d("select",{class:"input",id:"elems.id","onUpdate:modelValue":t=>s.value.data[e.name]=t},[e.data?(a(!0),n(c,{key:0},_(e.data,t=>(a(),n("option",{key:t.id,value:Number(t.id)},r(t.title||t.name||t.text||"Пусто"),9,Me))),128)):(a(),n("option",{key:1,value:-1},"Пусто",8,Oe))],8,Fe),[[E,s.value.data[e.name]]]),o.value&&o.value[e.name]?(a(),n("p",je,r(o.value[e.name]),1)):p("",!0)]))),128)),(a(!0),n(c,null,_(V.value[s.value.id].forms,e=>(a(),n("div",{class:"admin__content-form__item",key:e.id},[y(D,{to:e.id},{default:w(()=>[g(r(e.placeholder),1)]),_:2},1032,["to"]),e.form?(a(),n("div",ze,[(a(!0),n(c,null,_(e.form,t=>(a(),n("div",{key:t.id},[U(d("input",{class:"input",type:t.type,checked:t.checked,id:t.id,name:t.name,value:t.value,"onUpdate:modelValue":v=>s.value.data[t.name]=v},null,8,Pe),[[T,s.value.data[t.name]]]),y(D,{class:"label-radio",to:t.id},{default:w(()=>[g(r(t.title),1)]),_:2},1032,["to"])]))),128))])):U((a(),n("input",{key:1,class:"input",type:e.type,placeholder:e.placeholder,id:e.id,"onUpdate:modelValue":t=>s.value.data[e.name]=t},null,8,Ge)),[[T,s.value.data[e.name]]]),o.value&&o.value[e.name]?(a(),n("p",He,r(o.value[e.name]),1)):p("",!0)]))),128)),d("button",{class:"button input admin__content-form__btn hover",onClick:k(O,["prevent"])},"Добавить")])):p("",!0),s.value.active&&u.value==2?(a(),n("div",Je,[Ke,(a(!0),n(c,null,_(V.value[s.value.id].meta,e=>(a(),n("div",{key:e.id,class:"admin__content-form__item"},[y(D,{to:e.id},{default:w(()=>[g(r(e.placeholder),1)]),_:2},1032,["to"]),U(d("select",{class:"input",id:"elems.id","onUpdate:modelValue":t=>s.value.data[e.name]=t},[e.data?(a(!0),n(c,{key:0},_(e.data,t=>(a(),n("option",{key:t.id,value:Number(t.id)},r(t.title||t.name||t.text||"Пусто"),9,We))),128)):(a(),n("option",{key:1,value:-1},"Пусто",8,Xe))],8,Qe),[[E,s.value.data[e.name]]]),o.value&&o.value[e.name]?(a(),n("p",Ye,r(o.value[e.name]),1)):p("",!0)]))),128)),(a(!0),n(c,null,_(V.value[s.value.id].forms,e=>(a(),n("div",{class:"admin__content-form__item",key:e.id},[e.form?(a(),R(D,{key:0,to:e.id},{default:w(()=>[g(r(e.placeholder),1)]),_:2},1032,["to"])):p("",!0),e.form?(a(),n("div",Ze,[(a(!0),n(c,null,_(e.form,t=>(a(),n("div",{key:t.id},[U(d("input",{class:"input",type:t.type,id:t.id,name:t.name,value:t.value,"onUpdate:modelValue":v=>s.value.data[t.name]=v},null,8,et),[[T,s.value.data[t.name]]]),y(D,{class:"label-radio",to:t.id},{default:w(()=>[g(r(t.title),1)]),_:2},1032,["to"])]))),128))])):p("",!0)]))),128)),(a(!0),n(c,null,_(V.value[s.value.id].forms,e=>(a(),n("div",{class:"admin__content-form__item",key:e.id},[y(D,{to:e.id},{default:w(()=>[g(r(e.placeholder),1)]),_:2},1032,["to"]),U((a(),n("input",{class:"input",key:e.id,type:e.type,placeholder:e.placeholder,id:e.id,"onUpdate:modelValue":t=>s.value.data[e.name]=t},null,8,tt)),[[T,s.value.data[e.name]]]),o.value&&o.value[e.name]?(a(),n("p",at,r(o.value[e.name]),1)):p("",!0)]))),128)),d("button",{class:"button input admin__content-form__btn hover",onClick:k(z,["prevent"])},"Обновить")])):p("",!0)]),C.value===!1?(a(),n("div",nt,lt)):p("",!0)])])])])]))}};export{ut as default};
