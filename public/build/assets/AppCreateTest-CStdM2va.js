import{r as y,q as R,o as S,e as A,a as s,c as n,b as t,F as b,d as x,l as r,i as p,j as g,v as C,B as $,w as h,m as _,t as m,k as U,h as z,x as E}from"./app-BxmQDjrR.js";import{_ as G}from"./AppActive-czQzqbyx.js";import{_ as v}from"./AppLabel-DGWVFSkF.js";import{A as H,a as I}from"./AppArrowRight-Dg7FoaJb.js";const J={class:"app__create-test"},K={class:"container"},O={class:"app__create-test__header2"},P=t("h1",null,"Создание теста",-1),Q=["value"],W=["value"],X=["value"],Y=["value"],Z={class:"app__create-test__inner"},ee={class:"app__create-content"},te={class:"app__cretae-test-header"},se={class:"app__create-item--box"},ae={class:"app__create-quest"},ne={key:0,class:"app__create-quest"},le=["onUpdate:modelValue"],oe={key:1},ie={style:{display:"flex","justify-content":"flex-end",gap:"10px"}},ue=["onUpdate:modelValue"],re=["onClick"],ce=["onUpdate:modelValue"],de=["onClick"],_e={class:"app__create-info"},pe={key:0,class:"app__create-list"},ve=["onClick"],he={class:"app__create-item__item"},me={class:"app__create-item--box"},fe={class:"app__create-item--box"},we={__name:"AppCreateTest",setup(ke){const w=y([]),f=y({title:"",discipline_id:-1,author_id:-1}),c=y([{questions:{text:""},answers:[{text:"",points:0}]}]),o=y(0),N=i=>{i==="+"?o.value+1>=c.value.length?o.value=0:o.value+=1:o.value<=0?o.value=c.value.length-1:o.value-=1},B=()=>{c.value.push({questions:{text:""},answers:[{text:"",points:0}]}),o.value++},M=()=>{c.value.length!==1&&(c.value.splice(o.value,1),o.value=o.value-1)},D=i=>{i.answers.push({text:"",points:0})},F=(i,a)=>{c.value[o.value].answers.splice(a,1)},L=R(()=>[c.value[o.value]]),T=async()=>{const i=[{tests:f.value},...c.value];try{const a=await A.post("/api/tests/setall",i);w.value.push("Успешно. Тест добавлен!"),console.log(a)}catch(a){w.value.push("Ошибка. Перепроверьте данные."),console.log(a)}},j=i=>{w.value.splice(i,1)},V=y([]),q=y([]);return S(async()=>{var i,a,e,l,d,k;try{const u=await A.get("/api/disciplines");V.value=((a=(i=u.data)==null?void 0:i.data)==null?void 0:a.data)||((e=u.data)==null?void 0:e.data)||u.data}catch(u){console.log(u)}try{const u=await A.get("/api/authors");q.value=((d=(l=u.data)==null?void 0:l.data)==null?void 0:d.data)||((k=u.data)==null?void 0:k.data)||u.data}catch(u){console.log(u)}}),(i,a)=>(s(),n("div",J,[t("div",K,[(s(!0),n(b,null,x(w.value,(e,l)=>(s(),z(G,{key:l,message:e,onDismissed:d=>j(l)},null,8,["message","onDismissed"]))),128)),t("div",O,[P,t("div",null,[r(v,null,{default:p(()=>[_("Название: ")]),_:1}),g(t("input",{type:"text",class:"input","onUpdate:modelValue":a[0]||(a[0]=e=>f.value.title=e),placeholder:"Введите название"},null,512),[[C,f.value.title]]),r(v,null,{default:p(()=>[_("Дисциплина: ")]),_:1}),g(t("select",{class:"input",id:"elems.id","onUpdate:modelValue":a[1]||(a[1]=e=>f.value.discipline_id=e)},[V.value.length?(s(!0),n(b,{key:0},x(V.value,e=>(s(),n("option",{key:e.id,value:Number(e.id)},m(e.title||e.name||e.text||"Пусто"),9,Q))),128)):(s(),n("option",{key:1,value:-1},"Пусто",8,W))],512),[[$,f.value.discipline_id]]),r(v,null,{default:p(()=>[_("Автор: ")]),_:1}),g(t("select",{class:"input",id:"elems.id","onUpdate:modelValue":a[2]||(a[2]=e=>f.value.author_id=e)},[q.value.length?(s(!0),n(b,{key:0},x(q.value,e=>(s(),n("option",{key:e.id,value:Number(e.id)},m(e.name||"")+" "+m(e.surname||"")+" "+m(e.patronymic||""),9,X))),128)):(s(),n("option",{key:1,value:-1},"Пусто",8,Y))],512),[[$,f.value.author_id]])])]),t("div",Z,[t("div",ee,[t("div",te,[t("button",{class:"button input admin__content-form__btn hover",onClick:h(B,["prevent"])},"Добавить новый вопрос"),t("button",{class:"button input admin__content-form__btn hover",onClick:h(M,["prevent"])},"Удалить вопрос"),t("div",se,[r(H,{onClick:a[3]||(a[3]=h(e=>N("-"),["prevent"]))}),_(" "+m(o.value)+" ",1),r(I,{onClick:a[4]||(a[4]=h(e=>N("+"),["prevent"]))})])]),(s(!0),n(b,null,x(L.value,e=>(s(),n("div",ae,[e.questions?(s(),n("div",ne,[r(v,null,{default:p(()=>[_("Вопрос: ")]),_:1}),t("div",null,[g(t("input",{class:"input",type:"text",placeholder:"Введите название вопроса","onUpdate:modelValue":l=>e.questions.text=l},null,8,le),[[C,e.questions.text]])])])):U("",!0),e.answers?(s(),n("div",oe,[t("div",null,[(s(!0),n(b,null,x(e.answers,(l,d)=>(s(),n("div",{class:"app__create-item__block",key:d},[r(v,null,{default:p(()=>[_("Ответ: ")]),_:1}),t("div",ie,[g(t("input",{class:"input",type:"text",placeholder:"Введите ответ на вопрос","onUpdate:modelValue":k=>l.text=k},null,8,ue),[[C,l.text]]),t("button",{class:"button input app__create-absolute hover",onClick:h(k=>F(e,d),["prevent"])},"-",8,re)]),r(v,null,{default:p(()=>[_("Кол-во баллов: ")]),_:1}),g(t("input",{class:"input",type:"number",placeholder:"Кол-во баллов ","onUpdate:modelValue":k=>l.points=k},null,8,ce),[[C,l.points]])]))),128))]),t("button",{class:"button input admin__content-form__btn hover",onClick:h(l=>D(e),["prevent"])},"+",8,de)])):U("",!0)]))),256))]),t("div",_e,[c.value.length?(s(),n("ul",pe,[(s(!0),n(b,null,x(c.value,(e,l)=>(s(),n("li",{class:"app__create-item hover",onClick:h(d=>o.value=l,["prevent"])},[t("div",{class:E(["app__create-item--box",{"app__create-item--active":o.value===l}])},[r(v,null,{default:p(()=>[_("Вопрос: ")]),_:1}),t("p",null,m(e.questions.text),1)],2),(s(!0),n(b,null,x(e.answers,d=>(s(),n("div",he,[t("div",me,[r(v,null,{default:p(()=>[_("Ответ: ")]),_:1}),t("p",null,m(d.text),1)]),t("div",fe,[r(v,null,{default:p(()=>[_("Кол-во баллов: ")]),_:1}),t("p",null,m(d.points),1)])]))),256))],8,ve))),256))])):U("",!0),t("button",{class:"button input admin__content-form__btn hover",onClick:h(T,["prevent"])},"Отправить")])])])]))}};export{we as default};
