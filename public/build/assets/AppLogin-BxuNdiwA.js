import{u as V,f as x,r as u,g as A,a as o,h as m,i as d,c as i,d as b,F as B,j as v,v as _,b as n,t as h,k as g,w as C,l as D,m as L,e as N}from"./app-BxmQDjrR.js";import{_ as S}from"./AppActive-czQzqbyx.js";import{A as F}from"./AppAuthSection-C4jFz5OS.js";const M=n("h2",{class:"title"},"Авторизация",-1),R={key:0},T={key:1},I={__name:"AppLogin",setup(U){const f=V(),p=x(),l=u([]),k=e=>{l.value.splice(e,1)},s=u({}),a=u({email:"",password:""}),w=()=>{s.value={},N.post("/api/auth/login",{email:a.value.email,password:a.value.password}).then(e=>(console.log("auth",e),localStorage.setItem("access_token",e.data.access_token),p.commit("setAuth",e.data.access_token),p.dispatch("login"))).then(()=>{l.value.push("Вы успешно авторизировались"),f.push({name:"Home"})}).catch(e=>{s.value=e.response.data.errors,console.log("err",e),l.value.push("Ошибка регистрации")})};return(e,r)=>{const y=A("RouterLink");return o(),m(F,null,{default:d(()=>[(o(!0),i(B,null,b(l.value,(t,c)=>(o(),m(S,{key:c,message:t,onDismissed:$=>k(c)},null,8,["message","onDismissed"]))),128)),M,v(n("input",{id:"email",type:"email","onUpdate:modelValue":r[0]||(r[0]=t=>a.value.email=t),class:"input",placeholder:"Введите почту"},null,512),[[_,a.value.email]]),s.value&&s.value.email?(o(),i("p",R,h(s.value.email),1)):g("",!0),v(n("input",{id:"password",type:"password","onUpdate:modelValue":r[1]||(r[1]=t=>a.value.password=t),class:"input",placeholder:"Введите пароль"},null,512),[[_,a.value.password]]),n("button",{onClick:C(w,["prevent"]),class:"button hover",type:"submit"},"Отправить"),s.value&&s.value.password?(o(),i("p",T,h(s.value.password),1)):g("",!0),D(y,{to:"/register"},{default:d(()=>[L("Регистрация")]),_:1})]),_:1})}}};export{I as default};
