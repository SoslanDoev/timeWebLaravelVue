import{f as k,u as q,s as C,r as v,o as N,e as i,a as o,c as n,b as r,m as B,t as d,F as m,d as w,w as y,x as D}from"./app-BxmQDjrR.js";const M={class:"app__test"},T={class:"container"},$={class:"app__test-inner"},A={class:"title"},E={class:"app__test-item"},F=["onClick"],S={__name:"AppTest",setup(H){const b=k(),u=q(),p=C().params.id,_=v([]),c=v({}),l=()=>{u.push({name:"Home",params:{id:-1}})},f=async()=>{var e,t,a;try{const s=await i.get(`/api/tests/${p}`);return((t=(e=s.data)==null?void 0:e.data)==null?void 0:t.data)||((a=s.data)==null?void 0:a.data)||s.data}catch{l()}},g=(e,t)=>{console.log(e,t),c.value[e.id]=t.id},x=async()=>{const e=[{user_id:b.state.user.id}];Object.entries(c.value).forEach(t=>{e.push({question_id:Number(t[0]),answer_id:Number(t[1])})});try{const t=await i.post("/api/useranswer/end-quest",e);u.push({name:"Home",params:{id:-1}})}catch(t){console.log(t)}};return N(async()=>{var e,t,a;await f();try{const s=await i.get(`/api/tests/${p}/questions`),h=((t=(e=s.data)==null?void 0:e.data)==null?void 0:t.data)||((a=s.data)==null?void 0:a.data)||s.data;_.value=h}catch(s){console.log(s),l()}}),(e,t)=>(o(),n("div",M,[r("div",T,[r("div",$,[B(d(c.value)+" ",1),(o(!0),n(m,null,w(_.value.questions,a=>(o(),n("div",{key:a.id,class:"app__test-items"},[r("h4",A,d(a.text),1),(o(!0),n(m,null,w(a.answers,s=>(o(),n("div",E,[r("p",{onClick:y(h=>g(a,s),["prevent"]),class:D([{"app__test-item--active":c.value[a.id]===s.id},"hover"])},d(s.text),11,F)]))),256))]))),128)),r("button",{class:"button app__test-btn hover",onClick:y(x,["prevent"])},"Закончить")])])]))}};export{S as default};
